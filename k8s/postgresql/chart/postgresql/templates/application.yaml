apiVersion: app.k8s.io/v1beta1
kind: Application
metadata:
  name: "{{ .Release.Name }}"
  annotations:
    kubernetes-engine.cloud.google.com/icon: >-
      data:image/png;base64,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
    marketplace.cloud.google.com/deploy-info: '{"partner_id": "click-to-deploy-containers", "product_id": "postgresql", "partner_name": "Google Click to Deploy"}'
  labels:
    app.kubernetes.io/name: "{{ .Release.Name }}"
spec:
  type: PostgreSQL
  version: '9.6.10'
  description: |-
    PostgreSQL is an open source object-relational database with an emphasis on extensibility and standards-compliance.

    # Support
    Google does not offer support for this solution. However, community support is available on
    [Stack Overflow](https://stackoverflow.com/questions/tagged/postgresql/).
    Additional community support is available on [community forums](https://www.postgresql.org/list/).
  info:
  - name: PostgreSQL IP address
    type: Reference
    valueFrom:
      serviceRef:
        name: {{ .Release.Name }}-postgresql-svc
  - name: Temporary password for user postgres
    type: Reference
    valueFrom:
      secretKeyRef:
        key: password
        name: {{ .Release.Name }}-secret
  - name: Application Namespace
    value: {{ .Release.Namespace }}
  maintainers:
  - name: Google Click to Deploy
    url: https://cloud.google.com/solutions/#click-to-deploy
  links:
  - description: 'User Guide: Google Click to Deploy PostgreSQL'
    url: https://github.com/GoogleCloudPlatform/click-to-deploy/blob/master/k8s/postgresql/README.md
  - description: 'PostgreSQL: Getting Started'
    url: https://github.com/GoogleCloudPlatform/postgresql-docker/blob/master/9/README.md
  selector:
    matchLabels:
      app.kubernetes.io/name: "{{ .Release.Name }}"
  componentKinds:
  - group: apps/v1beta2
    kind: Deployment
  - group: v1
    kind: PersistentVolumeClaim
  - group: v1
    kind: Secret
  - group: v1
    kind: Service
  - group: v1
    kind: ServiceAccount
  notes: |-
    # Access PostgreSQL

    Get the external IP of the PostgreSQL service:

    ```
    SERVICE_IP=$(kubectl get \
      --namespace {{ .Release.Namespace }} \
      svc {{ .Release.Name }}-postgresql-svc \
      -o jsonpath='{.status.loadBalancer.ingress[0].ip}')

    export PGPASSWORD=$(kubectl get secret "{{ .Release.Name }}-secret" \
      --output=jsonpath='{.data.password}' | base64 -d)

    psql -U postgres -h $SERVICE_IP
    ```

    Note that it might take some time for the external IP to be provisioned.

